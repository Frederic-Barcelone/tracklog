<%- title "Logs for #{@selected_year}" -%>

<div class="site">
  <div id="logs-add-log-button">
    <%= link_to "Add a Log", new_log_path, :class => "button big" %>
  </div>

  <h1>Logs</h1>

  <%- unless @available_years.empty? -%>
    <p>
      <%=raw @available_years.map { |year| year == @selected_year ? year : link_to(year, year_logs_path(:year => year)) }.join(" | ") %>
    </p>
  <%- end -%>

  <%- if @logs.size == 0 -%>
    <p id="logs-no-logs">
      You donâ€™t have any logs for <%= @selected_year %>.
    </p>
  <%- else -%>
    <%- @logs_by_months.each do |month, data| -%>
      <div class="logs-month">
        <div class="logs-month-box">
          <div class="month"><%=l month, :format => "%B" %></div>
          <div class="year"><%= @selected_year %></div>
        </div>
        <div class="logs-month-logs">
          <table>
            <thead>
              <tr>
                <th class="l">Name</th>
                <th class="l" width="130">Start</th>
                <th class="r" width="100">Duration</th>
                <th class="r" width="100">Distance</th>
              </tr>
            </thead>
            <tbody>
              <%- data[:logs].each do |log| -%>
                <tr>
                  <td><%= link_to log.name, log %></td>
                  <td><%=l log.start_time, :format => "%d.%m.%Y %H:%M" %></td>
                  <td class="r"><%=format_duration log.duration %></td>
                  <td class="r"><%=format_distance log.distance %></td>
                </tr>
              <%- end -%>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="3" class="r"><%=dashboard_duration data[:total_duration] %></td>
                <td class="r"><%=format_distance data[:total_distance] %></td>
              </tr>
            </tfoot>
          </table>
        </div>
        <br class="clear">
      </div>
    <%- end -%>

    <div id="logs-total">
      <div class="distance">
        <%=format_distance @total_distance %>
      </div>
      <div class="duration">
        <%=dashboard_duration @total_duration %>
      </div>
      <br class="clear">
    </div>
  <%- end -%>
</div>
